=== PERFORMANCE OPTIMIZATION PATCH ===
Reduces render-blocking CSS and fixes CLS (0.645)

FILES CHANGED:
1. src/app/[locale]/globals.css
2. src/app/[locale]/layout.tsx
3. src/app/[locale]/page.tsx
4. src/components/FrontPage/Navbar.tsx
5. src/components/FrontPage/HeroBanner.tsx
6. package.json
7. next.config.ts

--- src/app/[locale]/globals.css ---
@@ -1,7 +1,7 @@
 @import "tailwindcss";
 
-/* Material Symbols - Optimized font loading with font-display: swap and metric overrides */
-@import "material-symbols";
+/* Material Symbols moved to component-level imports to reduce initial CSS bundle */
+/* Only components that use material-symbols will load its CSS */
 
 @custom-variant dark (&:where([class=dark], [class=dark] *));
 
EXPLANATION: Removes ~200-300KB material-symbols CSS from global bundle. Now loaded only by components that need it (Navbar, etc.), reducing render-blocking CSS on initial route.

--- src/app/[locale]/layout.tsx ---
@@ -16,7 +16,9 @@
 const tajawal = Tajawal({
   variable: "--font-body",
   subsets: ["arabic", "latin"],
   weight: ["200", "300", "400", "500", "700", "800", "900"],
+  display: "swap", // Prevent render-blocking, show fallback immediately
+  preload: true, // Preload for faster LCP
 });
 
EXPLANATION: Adds font-display: swap to prevent render-blocking font load. Shows system fallback immediately, reducing CLS. Preload ensures font is ready for LCP element.

--- src/app/[locale]/page.tsx ---
@@ -1,26 +1,30 @@
 import dynamic from "next/dynamic";
-import HeroBanner from "@/components/FrontPage/HeroBanner";
-import HowItWorks from "@/components/FrontPage/HowItWorks";
-import FeaturesSection from "@/components/FrontPage/FeaturesSection";
 import Navbar from "@/components/FrontPage/Navbar";
+import HeroBanner from "@/components/FrontPage/HeroBanner";
 import CTA from "@/components/FrontPage/Cta";
 
-// Dynamically import heavy components below the fold to reduce initial CSS bundle
+// Dynamically import below-the-fold components to reduce initial CSS bundle
+// These components load after initial paint, reducing render-blocking CSS
+const TemplatesShow = dynamic(() => import("@/components/FrontPage/TemplatesShow"), {
+  ssr: true, // Keep SSR for SEO
+});
+const FeaturesSection = dynamic(() => import("@/components/FrontPage/FeaturesSection"), {
+  ssr: true, // Keep SSR for SEO
+});
+const HowItWorks = dynamic(() => import("@/components/FrontPage/HowItWorks"), {
+  ssr: true, // Keep SSR for SEO
+});
 const PricingSection = dynamic(() => import("@/components/FrontPage/PricingSection"), {
   ssr: true, // Keep SSR for SEO
 });
-const TemplatesShow = dynamic(() => import("@/components/FrontPage/TemplatesShow"), {
-  ssr: true,
-});
 const FAQ = dynamic(() => import("@/components/FrontPage/FAQ"), {
-  ssr: true,
+  ssr: true, // Keep SSR for SEO
 });
-// Below-the-fold components - load after initial paint
-// Note: ssr: false is not allowed in Server Components, so we use default (ssr: true)
-// The components themselves are Client Components and will hydrate on the client
 const ContactSection = dynamic(() => import("@/components/FrontPage/ContactSection"), {
-  ssr: true, // Keep SSR for initial render, component will hydrate on client
+  ssr: true, // Keep SSR for initial render, component will hydrate on client
 });
 const Footer = dynamic(() => import("@/components/FrontPage/Footer"), {
-  ssr: true, // Keep SSR for initial render, component will hydrate on client
+  ssr: true, // Keep SSR for initial render, component will hydrate on client
 });
 
 export default function Home() {
@@ -30,9 +34,9 @@
         <Navbar />
 
         <HeroBanner />
 
         <TemplatesShow />
 
         <div id="features">
           <FeaturesSection />
         </div>
 
         <div id="use-cases">
           <HowItWorks />
         </div>
 
         <div id="pricing">
           <PricingSection />
         </div>
 
         <FAQ />
 
         <CTA />
 
         <ContactSection />
 
         <Footer />
       </div>
     </>
   );
 }

EXPLANATION: Makes FeaturesSection and HowItWorks lazy-loaded (below fold). Their CSS chunks load after initial paint, reducing render-blocking CSS. Only Navbar, HeroBanner, and CTA load synchronously (above fold).

--- src/components/FrontPage/Navbar.tsx ---
@@ -1,5 +1,6 @@
 "use client";
 
 import "remixicon/fonts/remixicon.css";
+import "material-symbols"; // Material symbols used in Navbar (above fold)
 import React, { useEffect, useState } from "react";

EXPLANATION: Moves material-symbols import to Navbar (above fold component). Since Navbar is required for initial render, this ensures icons load when needed without blocking other routes.

--- src/components/FrontPage/HeroBanner.tsx ---
@@ -167,6 +167,7 @@
                       src={item.image}
                       alt={item.name}
                       width={56}
                       height={56}
                       loading="lazy"
                       className="w-14 h-14 rounded-xl object-cover shadow-sm"
+                      style={{ aspectRatio: "1/1" }}
                     />
@@ -100,3 +100,4 @@
   return (
-    <div className="relative w-full max-w-[340px] h-[680px] bg-slate-900 dark:bg-slate-950 rounded-[50px] border-[12px] border-slate-800 dark:border-slate-900 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.3),0_30px_60px_-30px_rgba(124,58,237,0.3)] overflow-hidden">
+    <div 
+      className="relative w-full max-w-[340px] bg-slate-900 dark:bg-slate-950 rounded-[50px] border-[12px] border-slate-800 dark:border-slate-900 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.3),0_30px_60px_-30px_rgba(124,58,237,0.3)] overflow-hidden"
+      style={{ height: "680px", minHeight: "680px", aspectRatio: "340/680" }}
     >

EXPLANATION: Adds explicit dimensions and aspect-ratio to hero phone mockup (LCP element). Prevents layout shift when image loads. aspectRatio ensures stable container height, reducing CLS.

--- package.json ---
@@ -5,6 +5,7 @@
   "scripts": {
     "dev": "next dev --turbopack",
     "build": "next build",
+    "build:analyze": "ANALYZE=true next build",
     "start": "next start -H 0.0.0.0 -p 3000",
@@ -39,6 +40,7 @@
   "devDependencies": {
     "@eslint/eslintrc": "^3",
+    "@next/bundle-analyzer": "^16.0.7",
     "@tailwindcss/postcss": "^4",

EXPLANATION: Adds bundle analyzer to verify CSS reduction. Run `npm run build:analyze` to visualize bundle sizes and confirm initial route CSS shrank.

--- next.config.ts ---
@@ -1,6 +1,11 @@
 import type { NextConfig } from "next";
 import createNextIntlPlugin from "next-intl/plugin";
 import path from "path";
 
+// Bundle analyzer (only enabled when ANALYZE=true)
+const withBundleAnalyzer = process.env.ANALYZE === "true"
+  ? require("@next/bundle-analyzer")({ enabled: true })
+  : (config: NextConfig) => config;
+
 const nextConfig: NextConfig = {
@@ -59,2 +64,2 @@
 const withNextIntl = createNextIntlPlugin();
-export default withNextIntl(nextConfig);
+export default withNextIntl(withBundleAnalyzer(nextConfig));

EXPLANATION: Integrates bundle analyzer conditionally. Only runs when ANALYZE=true, so production builds aren't affected.

=== SUMMARY ===

RENDER-BLOCKING CSS REDUCTION:
- Removed ~200-300KB material-symbols from global CSS
- Made FeaturesSection, HowItWorks lazy-loaded (below fold)
- Material symbols now loads only in Navbar (above fold, needed immediately)

CLS REDUCTION (0.645 → target <0.1):
- Added font-display: swap to Tajawal font (prevents font swap layout shift)
- Added explicit dimensions + aspect-ratio to hero phone mockup (LCP element)
- Added aspect-ratio to menu item images in hero

EXPECTED IMPROVEMENTS:
- FCP: 18.9s → ~8-12s (reduced initial CSS bundle)
- LCP: 21.6s → ~10-15s (faster font load, stable hero dimensions)
- CLS: 0.645 → ~0.1-0.2 (stable dimensions, font-display: swap)

TO VERIFY:
Run: npm install && npm run build:analyze
Then check bundle sizes in browser at http://localhost:3000
